<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動世界地圖 - 衛星版</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: sans-serif; }
        #map { height: 100vh; width: 100%; background: #000; }
        
        /* 自定義標籤樣式 (類似你提供的連結) */
        .country-label {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 1px solid #fff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
        }
    </style>
</head>
<body>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 1. 初始化地圖，設定深色背景
        const map = L.map('map', {
            center: [20, 0],
            zoom: 3,
            minZoom: 2
        });

        // 2. 載入衛星地圖底圖 (Esri Satellite)
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EBP, and the GIS User Community'
        }).addTo(map);

        // 3. 載入各國邊界並設定點擊跳轉
        fetch('https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson')
            .then(res => res.json())
            .then(data => {
                L.geoJSON(data, {
                    style: {
                        color: "#fff",      // 國界線顏色
                        weight: 0.5,         // 線條粗細
                        fillColor: "transparent", // 平時透明
                        fillOpacity: 0
                    },
                    onEachFeature: function (feature, layer) {
                        const countryName = feature.properties.ADMIN;

                        // 設定滑鼠移入：顯示國名並變色
                        layer.on('mouseover', function(e) {
                            this.setStyle({ fillColor: "#3498db", fillOpacity: 0.3 });
                            this.bindTooltip(countryName, {
                                permanent: false, 
                                direction: "top",
                                className: "country-label"
                            }).openTooltip();
                        });

                        // 設定滑鼠移出：恢復原狀
                        layer.on('mouseout', function(e) {
                            this.setStyle({ fillColor: "transparent", fillOpacity: 0 });
                        });

                        // 設定點擊：跳轉到介紹頁面
                        layer.on('click', function() {
                            // 你可以改成跳轉到你自製的頁面，或維基百科
                            window.location.href = `https://zh.wikipedia.org/wiki/${encodeURIComponent(countryName)}`;
                        });
                    }
                }).addTo(map);
            });
    </script>
</body>
</html>
