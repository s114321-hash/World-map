<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>åœ‹å®¶è©³ç´°è³‡è¨Š</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 40px; background: #f9f9f9; }
        .back-btn { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: bold; }
        .flag { width: 200px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1 { color: #2c3e50; font-size: 3em; margin-bottom: 10px; }
        .info-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .content { margin-top: 30px; font-size: 1.1em; color: #444; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">â¬… è¿”å›åœ°åœ–</a>
    <div id="loading">è¼‰å…¥ä¸­...</div>
    <div id="content-area" style="display:none;">
        <img id="flag" class="flag" src="" alt="åœ‹æ——">
        <h1 id="country-name">åœ‹å®¶åç¨±</h1>
        <div class="info-card">
            <p><b>é¦–éƒ½ï¼š</b> <span id="capital"></span></p>
            <p><b>äººå£ï¼š</b> <span id="population"></span></p>
        </div>
        <div class="content">
            <h3>ğŸ“– æ­·å²èˆ‡ç°¡ä»‹</h3>
            <p id="wiki-text"></p>
        </div>
    </div>

    <script>
        // å–å¾—ç¶²å€ä¸Šçš„åœ‹å®¶åç¨±
        const urlParams = new URLSearchParams(window.location.search);
        const countryName = urlParams.get('country');

        async function loadData() {
            try {
                // 1. æŠ“å–åŸºæœ¬è³‡æ–™
                const res = await fetch(`https://restcountries.com/v3.1/name/${countryName}?fullText=true`);
                const cData = await res.json();
                const country = cData[0];

                // 2. æŠ“å–ç¶­åŸºç™¾ç§‘ç°¡ä»‹
                const wRes = await fetch(`https://zh.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(countryName)}`);
                const wData = await wRes.json();

                // å¡«å…¥å…§å®¹
                document.getElementById('flag').src = country.flags.png;
                document.getElementById('country-name').innerText = countryName;
                document.getElementById('capital').innerText = country.capital ? country.capital[0] : 'ç„¡è³‡æ–™';
                document.getElementById('population').innerText = country.population.toLocaleString() + ' äºº';
                document.getElementById('wiki-text').innerText = wData.extract || 'æš«ç„¡è©³ç´°ä»‹ç´¹å…§å®¹ã€‚';

                document.getElementById('loading').style.display = 'none';
                document.getElementById('content-area').style.display = 'block';
            } catch (e) {
                document.getElementById('loading').innerText = 'æ‰¾ä¸åˆ°è©²åœ‹å®¶è³‡æ–™ã€‚';
            }
        }
        loadData();
    </script>
</body>
</html>
